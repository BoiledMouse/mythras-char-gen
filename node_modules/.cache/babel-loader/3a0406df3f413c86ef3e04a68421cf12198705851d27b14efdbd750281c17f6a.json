{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useCharacter}from'../context/characterContext';import cultures from'../data/cultures.json';import careers from'../data/careers.json';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function ConceptStep(){const{character,updateCharacter}=useCharacter();// 1. Define your arrays here instead of t('…')\nconst GENDERS=['Male','Female','Non‑binary','Other'];// Assuming each culture JSON now has a \"socialClasses\" array:\nconst cultureDef=cultures[character.culture]||{};const SOCIAL_CLASSES=cultureDef.socialClasses||[];// e.g. [\"Low\", \"Middle\", \"High\", \"Noble\"]\n// Careers is an object keyed by id, map to display names\nconst CAREER_LIST=Object.values(careers).map(c=>c.name);// Handlers\nconst onChange=field=>e=>updateCharacter({[field]:e.target.value});// Rolling helpers (you’ll wire up real D6 logic somewhere else)\nconst rollSocialClass=()=>{const roll=Math.floor(Math.random()*100)+1;// 1–100\nconst tbl=cultureDef.socialClassTable||[];const found=tbl.find(row=>roll>=row.min&&roll<=row.max);if(found)updateCharacter({socialClass:found.name});};const rollStartingMoney=()=>{const baseRoll=Array.from({length:4}).map(()=>Math.floor(Math.random()*6)+1).reduce((a,b)=>a+b,0);const multiplier=cultureDef.moneyMultiplier||1;const socMod=(cultureDef.socialClassModifiers||{})[character.socialClass]||1;const total=Math.round(baseRoll*multiplier*socMod);updateCharacter({silver:total});};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Character Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",value:character.name,onChange:onChange('name')})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Player Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",value:character.player,onChange:onChange('player')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gender\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:character.gender||'',onChange:onChange('gender'),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\\u2026\"}),GENDERS.map(g=>/*#__PURE__*/_jsx(\"option\",{value:g,children:g},g))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-input\",value:character.age||'',onChange:onChange('age')})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Culture/Background\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:character.culture||'',onChange:onChange('culture'),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a culture\\u2026\"}),Object.entries(cultures).map(_ref=>{let[key,c]=_ref;return/*#__PURE__*/_jsx(\"option\",{value:key,children:c.name},key);})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Career\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:character.career||'',onChange:onChange('career'),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a career\\u2026\"}),CAREER_LIST.map(name=>/*#__PURE__*/_jsx(\"option\",{value:name,children:name},name))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Social Class\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"form-select w-auto flex-1\",value:character.socialClass||'',onChange:onChange('socialClass'),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\\u2026\"}),SOCIAL_CLASSES.map(sc=>/*#__PURE__*/_jsx(\"option\",{value:sc,children:sc},sc))]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"px-3 py-1 bg-gold text-white rounded\",onClick:rollSocialClass,children:\"Roll\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Starting Money (silver)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-input w-24\",value:character.silver||'',readOnly:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"px-3 py-1 bg-gold text-white rounded\",onClick:rollStartingMoney,children:\"Roll\"})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useCharacter","cultures","careers","jsx","_jsx","jsxs","_jsxs","ConceptStep","character","updateCharacter","GENDERS","cultureDef","culture","SOCIAL_CLASSES","socialClasses","CAREER_LIST","Object","values","map","c","name","onChange","field","e","target","value","rollSocialClass","roll","Math","floor","random","tbl","socialClassTable","found","find","row","min","max","socialClass","rollStartingMoney","baseRoll","Array","from","length","reduce","a","b","multiplier","moneyMultiplier","socMod","socialClassModifiers","total","round","silver","className","children","player","gender","g","type","age","entries","_ref","key","career","sc","onClick","readOnly"],"sources":["/workspaces/mythras-char-gen/src/steps/ConceptStep.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useCharacter } from '../context/characterContext';\nimport cultures from '../data/cultures.json';\nimport careers from '../data/careers.json';\n\nexport function ConceptStep() {\n  const { character, updateCharacter } = useCharacter();\n\n  // 1. Define your arrays here instead of t('…')\n  const GENDERS = ['Male', 'Female', 'Non‑binary', 'Other'];\n  \n  // Assuming each culture JSON now has a \"socialClasses\" array:\n  const cultureDef = cultures[character.culture] || {};\n  const SOCIAL_CLASSES = cultureDef.socialClasses || []; \n  // e.g. [\"Low\", \"Middle\", \"High\", \"Noble\"]\n\n  // Careers is an object keyed by id, map to display names\n  const CAREER_LIST = Object.values(careers).map(c => c.name);\n\n  // Handlers\n  const onChange = field => e =>\n    updateCharacter({ [field]: e.target.value });\n\n  // Rolling helpers (you’ll wire up real D6 logic somewhere else)\n  const rollSocialClass = () => {\n    const roll = Math.floor(Math.random() * 100) + 1; // 1–100\n    const tbl = cultureDef.socialClassTable || [];\n    const found = tbl.find(row => roll >= row.min && roll <= row.max);\n    if (found) updateCharacter({ socialClass: found.name });\n  };\n\n  const rollStartingMoney = () => {\n    const baseRoll = Array.from({ length: 4 })\n      .map(() => Math.floor(Math.random() * 6) + 1)\n      .reduce((a, b) => a + b, 0);\n    const multiplier = cultureDef.moneyMultiplier || 1;\n    const socMod = (cultureDef.socialClassModifiers || {})[character.socialClass] || 1;\n    const total = Math.round(baseRoll * multiplier * socMod);\n    updateCharacter({ silver: total });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <label>Character Name</label>\n        <input\n          className=\"form-input\"\n          value={character.name}\n          onChange={onChange('name')}\n        />\n      </div>\n\n      <div>\n        <label>Player Name</label>\n        <input\n          className=\"form-input\"\n          value={character.player}\n          onChange={onChange('player')}\n        />\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div>\n          <label>Gender</label>\n          <select\n            className=\"form-select\"\n            value={character.gender || ''}\n            onChange={onChange('gender')}\n          >\n            <option value=\"\">Select…</option>\n            {GENDERS.map(g => (\n              <option key={g} value={g}>\n                {g}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div>\n          <label>Age</label>\n          <input\n            type=\"number\"\n            className=\"form-input\"\n            value={character.age || ''}\n            onChange={onChange('age')}\n          />\n        </div>\n      </div>\n\n      <div>\n        <label>Culture/Background</label>\n        <select\n          className=\"form-select\"\n          value={character.culture || ''}\n          onChange={onChange('culture')}\n        >\n          <option value=\"\">Select a culture…</option>\n          {Object.entries(cultures).map(([key, c]) => (\n            <option key={key} value={key}>\n              {c.name}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div>\n        <label>Career</label>\n        <select\n          className=\"form-select\"\n          value={character.career || ''}\n          onChange={onChange('career')}\n        >\n          <option value=\"\">Select a career…</option>\n          {CAREER_LIST.map(name => (\n            <option key={name} value={name}>\n              {name}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"mt-4 space-y-2\">\n        <label>Social Class</label>\n        <div className=\"flex items-center space-x-2\">\n          {/* Manual pick */}\n          <select\n            className=\"form-select w-auto flex-1\"\n            value={character.socialClass || ''}\n            onChange={onChange('socialClass')}\n          >\n            <option value=\"\">Select…</option>\n            {SOCIAL_CLASSES.map(sc => (\n              <option key={sc} value={sc}>\n                {sc}\n              </option>\n            ))}\n          </select>\n\n          {/* Or roll */}\n          <button\n            type=\"button\"\n            className=\"px-3 py-1 bg-gold text-white rounded\"\n            onClick={rollSocialClass}\n          >\n            Roll\n          </button>\n        </div>\n      </div>\n\n      <div className=\"mt-4 space-y-2\">\n        <label>Starting Money (silver)</label>\n        <div className=\"flex items-center space-x-2\">\n          <input\n            type=\"number\"\n            className=\"form-input w-24\"\n            value={character.silver || ''}\n            readOnly\n          />\n          <button\n            type=\"button\"\n            className=\"px-3 py-1 bg-gold text-white rounded\"\n            onClick={rollStartingMoney}\n          >\n            Roll\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}