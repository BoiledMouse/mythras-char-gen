{"ast":null,"code":"// src/steps/EquipmentStep.jsx\nimport React,{useState,useEffect}from'react';import{useCharacter}from'../context/characterContext';import equipmentList from'../data/equipment.json';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function EquipmentStep(){var _character$startingMo;const{character,updateCharacter}=useCharacter();// Starting money in silver pieces\nconst[startingMoney,setStartingMoney]=useState((_character$startingMo=character.startingMoney)!==null&&_character$startingMo!==void 0?_character$startingMo:100);// Track quantities by equipment name\nconst[quantities,setQuantities]=useState(character.equipmentAlloc||{});// Calculate total spent\nconst totalSpent=Object.entries(quantities).reduce((sum,_ref)=>{let[name,qty]=_ref;const item=equipmentList.find(e=>e.name===name);return sum+((item===null||item===void 0?void 0:item.cost)||0)*qty;},0);const moneyLeft=startingMoney-totalSpent;// Persist changes to context\nuseEffect(()=>{updateCharacter({startingMoney,equipmentAlloc:quantities});},[startingMoney,quantities]);const handleQtyChange=(name,val)=>{let v=parseInt(val,10);if(isNaN(v)||v<0)v=0;setQuantities(prev=>({...prev,[name]:v}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium\",children:\"Starting Silver Pieces\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:0,value:startingMoney,onChange:e=>setStartingMoney(+e.target.value||0),className:\"mt-1 w-32 border-gray-300 rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-2\",children:\"Select Equipment\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full table-auto\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-100\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-1 text-left\",children:\"Item\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-1 text-right\",children:\"Cost (SP)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-1 text-center\",children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-2 py-1 text-right\",children:\"Total Cost\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:equipmentList.map(item=>{const qty=quantities[item.name]||0;const lineTotal=(item.cost||0)*qty;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-1\",children:item.name}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-1 text-right\",children:item.cost}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-1 text-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:0,value:qty,onChange:e=>handleQtyChange(item.name,e.target.value),className:\"w-16 border-gray-300 rounded text-right\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-2 py-1 text-right\",children:lineTotal})]},item.name);})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4 border-t\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Total Spent: \"}),totalSpent,\" SP\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Silver Remaining: \"}),moneyLeft,\" SP\"]})]});}","map":{"version":3,"names":["React","useState","useEffect","useCharacter","equipmentList","jsx","_jsx","jsxs","_jsxs","EquipmentStep","_character$startingMo","character","updateCharacter","startingMoney","setStartingMoney","quantities","setQuantities","equipmentAlloc","totalSpent","Object","entries","reduce","sum","_ref","name","qty","item","find","e","cost","moneyLeft","handleQtyChange","val","v","parseInt","isNaN","prev","className","children","type","min","value","onChange","target","map","lineTotal"],"sources":["/workspaces/mythras-char-gen/src/steps/EquipmentStep.jsx"],"sourcesContent":["// src/steps/EquipmentStep.jsx\nimport React, { useState, useEffect } from 'react';\nimport { useCharacter } from '../context/characterContext';\nimport equipmentList from '../data/equipment.json';\n\nexport function EquipmentStep() {\n  const { character, updateCharacter } = useCharacter();\n\n  // Starting money in silver pieces\n  const [startingMoney, setStartingMoney] = useState(character.startingMoney ?? 100);\n  // Track quantities by equipment name\n  const [quantities, setQuantities] = useState(character.equipmentAlloc || {});\n\n  // Calculate total spent\n  const totalSpent = Object.entries(quantities).reduce((sum, [name, qty]) => {\n    const item = equipmentList.find(e => e.name === name);\n    return sum + (item?.cost || 0) * qty;\n  }, 0);\n  const moneyLeft = startingMoney - totalSpent;\n\n  // Persist changes to context\n  useEffect(() => {\n    updateCharacter({ startingMoney, equipmentAlloc: quantities });\n  }, [startingMoney, quantities]);\n\n  const handleQtyChange = (name, val) => {\n    let v = parseInt(val, 10);\n    if (isNaN(v) || v < 0) v = 0;\n    setQuantities(prev => ({ ...prev, [name]: v }));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <label className=\"block font-medium\">Starting Silver Pieces</label>\n        <input\n          type=\"number\"\n          min={0}\n          value={startingMoney}\n          onChange={e => setStartingMoney(+e.target.value || 0)}\n          className=\"mt-1 w-32 border-gray-300 rounded\"\n        />\n      </div>\n\n      <div>\n        <h3 className=\"font-semibold mb-2\">Select Equipment</h3>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full table-auto\">\n            <thead>\n              <tr className=\"bg-gray-100\">\n                <th className=\"px-2 py-1 text-left\">Item</th>\n                <th className=\"px-2 py-1 text-right\">Cost (SP)</th>\n                <th className=\"px-2 py-1 text-center\">Quantity</th>\n                <th className=\"px-2 py-1 text-right\">Total Cost</th>\n              </tr>\n            </thead>\n            <tbody>\n              {equipmentList.map(item => {\n                const qty = quantities[item.name] || 0;\n                const lineTotal = (item.cost || 0) * qty;\n                return (\n                  <tr key={item.name} className=\"border-b\">\n                    <td className=\"px-2 py-1\">{item.name}</td>\n                    <td className=\"px-2 py-1 text-right\">{item.cost}</td>\n                    <td className=\"px-2 py-1 text-center\">\n                      <input\n                        type=\"number\"\n                        min={0}\n                        value={qty}\n                        onChange={e => handleQtyChange(item.name, e.target.value)}\n                        className=\"w-16 border-gray-300 rounded text-right\"\n                      />\n                    </td>\n                    <td className=\"px-2 py-1 text-right\">{lineTotal}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      <div className=\"pt-4 border-t\">\n        <span className=\"font-medium\">Total Spent: </span>{totalSpent} SP\n        <br />\n        <span className=\"font-medium\">Silver Remaining: </span>{moneyLeft} SP\n      </div>\n    </div>\n  );\n}\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,YAAY,KAAQ,6BAA6B,CAC1D,MAAO,CAAAC,aAAa,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,MAAO,SAAS,CAAAC,aAAaA,CAAA,CAAG,KAAAC,qBAAA,CAC9B,KAAM,CAAEC,SAAS,CAAEC,eAAgB,CAAC,CAAGT,YAAY,CAAC,CAAC,CAErD;AACA,KAAM,CAACU,aAAa,CAAEC,gBAAgB,CAAC,CAAGb,QAAQ,EAAAS,qBAAA,CAACC,SAAS,CAACE,aAAa,UAAAH,qBAAA,UAAAA,qBAAA,CAAI,GAAG,CAAC,CAClF;AACA,KAAM,CAACK,UAAU,CAAEC,aAAa,CAAC,CAAGf,QAAQ,CAACU,SAAS,CAACM,cAAc,EAAI,CAAC,CAAC,CAAC,CAE5E;AACA,KAAM,CAAAC,UAAU,CAAGC,MAAM,CAACC,OAAO,CAACL,UAAU,CAAC,CAACM,MAAM,CAAC,CAACC,GAAG,CAAAC,IAAA,GAAkB,IAAhB,CAACC,IAAI,CAAEC,GAAG,CAAC,CAAAF,IAAA,CACpE,KAAM,CAAAG,IAAI,CAAGtB,aAAa,CAACuB,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACJ,IAAI,GAAKA,IAAI,CAAC,CACrD,MAAO,CAAAF,GAAG,CAAG,CAAC,CAAAI,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEG,IAAI,GAAI,CAAC,EAAIJ,GAAG,CACtC,CAAC,CAAE,CAAC,CAAC,CACL,KAAM,CAAAK,SAAS,CAAGjB,aAAa,CAAGK,UAAU,CAE5C;AACAhB,SAAS,CAAC,IAAM,CACdU,eAAe,CAAC,CAAEC,aAAa,CAAEI,cAAc,CAAEF,UAAW,CAAC,CAAC,CAChE,CAAC,CAAE,CAACF,aAAa,CAAEE,UAAU,CAAC,CAAC,CAE/B,KAAM,CAAAgB,eAAe,CAAGA,CAACP,IAAI,CAAEQ,GAAG,GAAK,CACrC,GAAI,CAAAC,CAAC,CAAGC,QAAQ,CAACF,GAAG,CAAE,EAAE,CAAC,CACzB,GAAIG,KAAK,CAACF,CAAC,CAAC,EAAIA,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAG,CAAC,CAC5BjB,aAAa,CAACoB,IAAI,GAAK,CAAE,GAAGA,IAAI,CAAE,CAACZ,IAAI,EAAGS,CAAE,CAAC,CAAC,CAAC,CACjD,CAAC,CAED,mBACEzB,KAAA,QAAK6B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB9B,KAAA,QAAA8B,QAAA,eACEhC,IAAA,UAAO+B,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAAC,wBAAsB,CAAO,CAAC,cACnEhC,IAAA,UACEiC,IAAI,CAAC,QAAQ,CACbC,GAAG,CAAE,CAAE,CACPC,KAAK,CAAE5B,aAAc,CACrB6B,QAAQ,CAAEd,CAAC,EAAId,gBAAgB,CAAC,CAACc,CAAC,CAACe,MAAM,CAACF,KAAK,EAAI,CAAC,CAAE,CACtDJ,SAAS,CAAC,mCAAmC,CAC9C,CAAC,EACC,CAAC,cAEN7B,KAAA,QAAA8B,QAAA,eACEhC,IAAA,OAAI+B,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,kBAAgB,CAAI,CAAC,cACxDhC,IAAA,QAAK+B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9B9B,KAAA,UAAO6B,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAClChC,IAAA,UAAAgC,QAAA,cACE9B,KAAA,OAAI6B,SAAS,CAAC,aAAa,CAAAC,QAAA,eACzBhC,IAAA,OAAI+B,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAC,MAAI,CAAI,CAAC,cAC7ChC,IAAA,OAAI+B,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,cACnDhC,IAAA,OAAI+B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,UAAQ,CAAI,CAAC,cACnDhC,IAAA,OAAI+B,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,YAAU,CAAI,CAAC,EAClD,CAAC,CACA,CAAC,cACRhC,IAAA,UAAAgC,QAAA,CACGlC,aAAa,CAACwC,GAAG,CAAClB,IAAI,EAAI,CACzB,KAAM,CAAAD,GAAG,CAAGV,UAAU,CAACW,IAAI,CAACF,IAAI,CAAC,EAAI,CAAC,CACtC,KAAM,CAAAqB,SAAS,CAAG,CAACnB,IAAI,CAACG,IAAI,EAAI,CAAC,EAAIJ,GAAG,CACxC,mBACEjB,KAAA,OAAoB6B,SAAS,CAAC,UAAU,CAAAC,QAAA,eACtChC,IAAA,OAAI+B,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAEZ,IAAI,CAACF,IAAI,CAAK,CAAC,cAC1ClB,IAAA,OAAI+B,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAEZ,IAAI,CAACG,IAAI,CAAK,CAAC,cACrDvB,IAAA,OAAI+B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACnChC,IAAA,UACEiC,IAAI,CAAC,QAAQ,CACbC,GAAG,CAAE,CAAE,CACPC,KAAK,CAAEhB,GAAI,CACXiB,QAAQ,CAAEd,CAAC,EAAIG,eAAe,CAACL,IAAI,CAACF,IAAI,CAAEI,CAAC,CAACe,MAAM,CAACF,KAAK,CAAE,CAC1DJ,SAAS,CAAC,yCAAyC,CACpD,CAAC,CACA,CAAC,cACL/B,IAAA,OAAI+B,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAEO,SAAS,CAAK,CAAC,GAZ9CnB,IAAI,CAACF,IAaV,CAAC,CAET,CAAC,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,EACH,CAAC,cAENhB,KAAA,QAAK6B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BhC,IAAA,SAAM+B,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,eAAa,CAAM,CAAC,CAACpB,UAAU,CAAC,KAC9D,cAAAZ,IAAA,QAAK,CAAC,cACNA,IAAA,SAAM+B,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,oBAAkB,CAAM,CAAC,CAACR,SAAS,CAAC,KACpE,EAAK,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}