{"ast":null,"code":"// src/steps/ConceptStep.jsx\nimport React,{useState}from'react';import{useCharacter}from'../context/characterContext';import cultures from'../data/cultures.json';import careers from'../data/careers.json';import{rollDice}from'../utils/dice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function ConceptStep(){const{character,updateCharacter}=useCharacter();const[pctRoll,setPctRoll]=useState(null);const cult=cultures[character.culture]||null;const careerList=Object.keys(careers);// 1–100 roll for social class\nfunction rollPercentile(){const pct=rollDice('1d100');setPctRoll(pct);if(!cult)return;const found=cult.socialClasses.find(sc=>pct>=sc.min&&pct<=sc.max);if(found)updateCharacter({socialClass:found.name});}// Starting money\nfunction rollStartingMoney(){if(!cult||!character.socialClass)return;const base=rollDice(cult.moneyDice);const scDef=cult.socialClasses.find(sc=>sc.name===character.socialClass);const total=scDef?Math.round(base*scDef.mult):base;updateCharacter({startingMoney:total});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Character Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"mt-1 input\",value:character.name,onChange:e=>updateCharacter({name:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Player Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"mt-1 input\",value:character.playerName,onChange:e=>updateCharacter({playerName:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Gender\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"mt-1 input\",value:character.gender,onChange:e=>updateCharacter({gender:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select\\u2026\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Age\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"mt-1 input\",value:character.age,onChange:e=>updateCharacter({age:e.target.value})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Culture/Background\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"mt-1 input\",value:character.culture,onChange:e=>updateCharacter({culture:e.target.value,socialClass:'',startingMoney:0}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a culture\\u2026\"}),Object.entries(cultures).map(_ref=>{let[key,c]=_ref;return/*#__PURE__*/_jsx(\"option\",{value:key,children:c.displayName},key);})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Career\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"mt-1 input\",value:character.career,onChange:e=>updateCharacter({career:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a career\\u2026\"}),careerList.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:careers[c].displayName},c))]})]}),cult&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-semibold\",children:\"Social Class\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"flex-1 input\",value:character.socialClass,onChange:e=>updateCharacter({socialClass:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"(roll or pick\\u2026)\"}),cult.socialClasses.map(sc=>/*#__PURE__*/_jsx(\"option\",{value:sc.name,children:sc.name},sc.name))]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn-secondary\",onClick:rollPercentile,children:[\"Roll 1\\u2011100 \",pctRoll!=null&&`→ ${pctRoll}`]})]})]}),cult&&character.socialClass&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-primary\",onClick:rollStartingMoney,children:\"Roll Starting Money\"}),character.startingMoney!=null&&/*#__PURE__*/_jsxs(\"p\",{children:[\"You have \",/*#__PURE__*/_jsx(\"strong\",{children:character.startingMoney.toLocaleString()}),\"\\u202Fsp\"]})]})]});}","map":{"version":3,"names":["React","useState","useCharacter","cultures","careers","rollDice","jsx","_jsx","jsxs","_jsxs","ConceptStep","character","updateCharacter","pctRoll","setPctRoll","cult","culture","careerList","Object","keys","rollPercentile","pct","found","socialClasses","find","sc","min","max","socialClass","name","rollStartingMoney","base","moneyDice","scDef","total","Math","round","mult","startingMoney","className","children","type","value","onChange","e","target","playerName","gender","age","entries","map","_ref","key","c","displayName","career","onClick","toLocaleString"],"sources":["/workspaces/mythras-char-gen/src/steps/ConceptStep.jsx"],"sourcesContent":["// src/steps/ConceptStep.jsx\nimport React, { useState } from 'react';\nimport { useCharacter } from '../context/characterContext';\nimport cultures from '../data/cultures.json';\nimport careers from '../data/careers.json';\nimport { rollDice } from '../utils/dice';\n\nexport function ConceptStep() {\n  const { character, updateCharacter } = useCharacter();\n  const [pctRoll, setPctRoll] = useState(null);\n\n  const cult = cultures[character.culture] || null;\n  const careerList = Object.keys(careers);\n\n  // 1–100 roll for social class\n  function rollPercentile() {\n    const pct = rollDice('1d100');\n    setPctRoll(pct);\n    if (!cult) return;\n    const found = cult.socialClasses.find(sc => pct >= sc.min && pct <= sc.max);\n    if (found) updateCharacter({ socialClass: found.name });\n  }\n\n  // Starting money\n  function rollStartingMoney() {\n    if (!cult || !character.socialClass) return;\n    const base = rollDice(cult.moneyDice);\n    const scDef = cult.socialClasses.find(sc => sc.name === character.socialClass);\n    const total = scDef\n      ? Math.round(base * scDef.mult)\n      : base;\n    updateCharacter({ startingMoney: total });\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Character Name / Player Name */}\n      <div>\n        <label className=\"block font-semibold\">Character Name</label>\n        <input\n          type=\"text\"\n          className=\"mt-1 input\"\n          value={character.name}\n          onChange={e => updateCharacter({ name: e.target.value })}\n        />\n      </div>\n      <div>\n        <label className=\"block font-semibold\">Player Name</label>\n        <input\n          type=\"text\"\n          className=\"mt-1 input\"\n          value={character.playerName}\n          onChange={e => updateCharacter({ playerName: e.target.value })}\n        />\n      </div>\n\n      {/* Gender / Age */}\n      <div className=\"flex space-x-4\">\n        <div className=\"flex-1\">\n          <label className=\"block font-semibold\">Gender</label>\n          <select\n            className=\"mt-1 input\"\n            value={character.gender}\n            onChange={e => updateCharacter({ gender: e.target.value })}\n          >\n            <option value=\"\">Select…</option>\n            <option>Male</option>\n            <option>Female</option>\n            <option>Other</option>\n          </select>\n        </div>\n        <div className=\"flex-1\">\n          <label className=\"block font-semibold\">Age</label>\n          <input\n            type=\"number\"\n            className=\"mt-1 input\"\n            value={character.age}\n            onChange={e => updateCharacter({ age: e.target.value })}\n          />\n        </div>\n      </div>\n\n      {/* Culture & Career */}\n      <div>\n        <label className=\"block font-semibold\">Culture/Background</label>\n        <select\n          className=\"mt-1 input\"\n          value={character.culture}\n          onChange={e => updateCharacter({ culture: e.target.value, socialClass: '', startingMoney: 0 })}\n        >\n          <option value=\"\">Select a culture…</option>\n          {Object.entries(cultures).map(([key, c]) => (\n            <option key={key} value={key}>{c.displayName}</option>\n          ))}\n        </select>\n      </div>\n      <div>\n        <label className=\"block font-semibold\">Career</label>\n        <select\n          className=\"mt-1 input\"\n          value={character.career}\n          onChange={e => updateCharacter({ career: e.target.value })}\n        >\n          <option value=\"\">Select a career…</option>\n          {careerList.map(c => (\n            <option key={c} value={c}>{careers[c].displayName}</option>\n          ))}\n        </select>\n      </div>\n\n      {/* Social Class */}\n      {cult && (\n        <div className=\"space-y-1\">\n          <label className=\"block font-semibold\">Social Class</label>\n          <div className=\"flex items-center space-x-2\">\n            <select\n              className=\"flex-1 input\"\n              value={character.socialClass}\n              onChange={e => updateCharacter({ socialClass: e.target.value })}\n            >\n              <option value=\"\">(roll or pick…)</option>\n              {cult.socialClasses.map(sc => (\n                <option key={sc.name} value={sc.name}>\n                  {sc.name}\n                </option>\n              ))}\n            </select>\n            <button\n              type=\"button\"\n              className=\"btn-secondary\"\n              onClick={rollPercentile}\n            >\n              Roll 1‑100 {pctRoll != null && `→ ${pctRoll}`}\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Starting Money */}\n      {cult && character.socialClass && (\n        <div className=\"space-y-1\">\n          <button\n            type=\"button\"\n            className=\"btn-primary\"\n            onClick={rollStartingMoney}\n          >\n            Roll Starting Money\n          </button>\n          {character.startingMoney != null && (\n            <p>\n              You have <strong>{character.startingMoney.toLocaleString()}</strong> sp\n            </p>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}